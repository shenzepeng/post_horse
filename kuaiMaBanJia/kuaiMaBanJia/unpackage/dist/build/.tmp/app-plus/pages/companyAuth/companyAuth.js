(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/companyAuth/companyAuth"],{"35cd":function(e,t,a){"use strict";a.r(t);var s=a("4c42"),i=a("397c");for(var o in i)"default"!==o&&function(e){a.d(t,e,function(){return i[e]})}(o);a("4d56");var n=a("2877"),c=Object(n["a"])(i["default"],s["a"],s["b"],!1,null,null,null);t["default"]=c.exports},"397c":function(e,t,a){"use strict";a.r(t);var s=a("dfb0"),i=a.n(s);for(var o in s)"default"!==o&&function(e){a.d(t,e,function(){return s[e]})}(o);t["default"]=i.a},"4c42":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("view",[1==e.pageState?a("view",{staticClass:"list-box"},[a("view",{staticClass:"list-item"},[a("view",{staticClass:"title"},[e._v("公司名称")]),a("view",{staticClass:"info"},[a("text",{staticClass:"info-text"},[e._v(e._s(e.companyInfoText.companyName))])])]),a("view",{staticClass:"list-item"},[a("view",{staticClass:"title"},[e._v("公司地址")]),a("view",{staticClass:"info"},[a("text",{staticClass:"info-text"},[e._v(e._s(e.companyInfoText.companyAddress))])])]),a("view",{staticClass:"list-item"},[a("view",{staticClass:"title"},[e._v("联系人姓名")]),a("view",{staticClass:"info"},[a("text",{staticClass:"info-text"},[e._v(e._s(e.companyInfoText.contactsPeopleName))])])]),a("view",{staticClass:"list-item"},[a("view",{staticClass:"title"},[e._v("服务区域")]),a("view",{staticClass:"info"},[a("text",{staticClass:"info-text"},[e._v(e._s(e.companyInfoText.serviceArea))])])]),a("view",{staticClass:"list-item"},[a("view",{staticClass:"title"},[e._v("服务详情")]),a("view",{staticClass:"info"},[a("text",{staticClass:"info-text"},[e._v(e._s(e.companyInfoText.serviceIfo))])])]),a("view",{staticClass:"list-item"},[a("view",{staticClass:"title"},[e._v("企业资质")]),a("view",{staticClass:"info"},[a("image",{staticClass:"info-img",attrs:{src:e.companyInfoText.companyQualifications,mode:"",eventid:"693bc546-0"},on:{error:e.imageError}})])]),a("view",{staticClass:"list-item"},[a("button",{staticClass:"btn",attrs:{type:"primary",eventid:"693bc546-1"},on:{tap:e.againAuth}},[e._v(e._s(e.btnText))])],1)]):e._e(),0==e.pageState?a("view",{staticClass:"auth-again"},[a("view",{staticClass:"auth-item"},[a("view",{staticClass:"label"},[e._v("公司名称")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.companyName,expression:"companyName"}],staticClass:"input",attrs:{type:"text",value:"",placeholder:"请输入公司名称",eventid:"693bc546-2"},domProps:{value:e.companyName},on:{input:function(t){t.target.composing||(e.companyName=t.target.value)}}})]),a("view",{staticClass:"auth-item"},[a("view",{staticClass:"label"},[e._v("公司地址")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.companyAddress,expression:"companyAddress"}],staticClass:"input",attrs:{type:"text",value:"",placeholder:"请输入公司地址",eventid:"693bc546-3"},domProps:{value:e.companyAddress},on:{input:function(t){t.target.composing||(e.companyAddress=t.target.value)}}})]),a("view",{staticClass:"auth-item"},[a("view",{staticClass:"label"},[e._v("联系人姓名")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.contactsPeopleName,expression:"contactsPeopleName"}],staticClass:"input",attrs:{type:"text",value:"",placeholder:"请输入联系人姓名",eventid:"693bc546-4"},domProps:{value:e.contactsPeopleName},on:{input:function(t){t.target.composing||(e.contactsPeopleName=t.target.value)}}})]),a("view",{staticClass:"auth-item"},[a("view",{staticClass:"label"},[e._v("服务区域")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.serviceArea,expression:"serviceArea"}],staticClass:"input",attrs:{type:"text",value:"",placeholder:"请输入服务区域",eventid:"693bc546-5"},domProps:{value:e.serviceArea},on:{input:function(t){t.target.composing||(e.serviceArea=t.target.value)}}})]),a("view",{staticClass:"auth-item"},[a("view",{staticClass:"label"},[e._v("服务详情")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.serviceIfo,expression:"serviceIfo"}],staticClass:"input",attrs:{value:"",placeholder:"请输入服务详情",eventid:"693bc546-6"},domProps:{value:e.serviceIfo},on:{input:function(t){t.target.composing||(e.serviceIfo=t.target.value)}}})]),a("view",{staticClass:"auth-item"},[a("view",{staticClass:"label"},[e._v("企业资质")]),a("view",{staticClass:"uni-common-mt"},[a("view",{staticClass:"demo"},[e.imageSrc?a("block",[a("image",{staticClass:"image",attrs:{src:e.imageSrc,mode:"widthFix"}})]):a("block",[a("view",{staticClass:"uni-hello-addfile",attrs:{eventid:"693bc546-7"},on:{click:e.chooseImage}},[e._v("+ 选择图片")])])],1)])]),a("view",{staticClass:"auth-item"},[a("button",{attrs:{type:"primary",eventid:"693bc546-8"},on:{tap:function(t){e.authFn()}}},[e._v("提交")])],1)]):e._e()])},i=[];a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i})},"4d56":function(e,t,a){"use strict";var s=a("7e0e"),i=a.n(s);i.a},"7e0e":function(e,t,a){},b918:function(e,t,a){"use strict";a("601e");var s=o(a("b0ce")),i=o(a("35cd"));function o(e){return e&&e.__esModule?e:{default:e}}Page((0,s.default)(i.default))},dfb0:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=o(a("3ff6")),i=o(a("95cb"));function o(e){return e&&e.__esModule?e:{default:e}}var n={data:function(){return{companyInfoText:{companyName:"未认证",companyAddress:"未认证",serviceArea:"未认证",serviceIfo:"未认证",companyQualifications:"",contactsPeopleName:"未认证"},pageState:1,imageSrc:"",companyName:"",companyAddress:"",serviceArea:"",serviceIfo:"",companyQualifications:"",contactsPeopleName:"",companyId:"",userInfo:{},btnText:"重新认证"}},onLoad:function(){this.init()},components:{uniIcon:i.default},methods:{init:function(t){var a=this;e.getStorage({key:"userInfo",success:function(e){console.log(e),a.userInfo=e.data,console.log(a.userInfo),a.getData(a.userInfo.id)},fail:function(e){console.log(e)}})},imageError:function(){this.userInfo.imgUrl="../../static/default_head.png"},authFn:function(){var t=this;if(""!=t.companyName)if(""!=t.companyAddress)if(""!=t.contactsPeopleName)if(""!=t.serviceArea)if(""!=t.serviceIfo){var a={userId:t.userInfo.id,companyName:t.companyName,companyAddress:t.companyAddress,serviceArea:t.serviceArea,serviceIfo:t.serviceIfo,companyQualifications:t.companyQualifications,contactsPeopleName:t.contactsPeopleName};console.log(JSON.stringify(a));"".concat(s.default,"/post_horse-0.0.1-SNAPSHOT/insertCompany.action"),"".concat(s.default,"/post_horse-0.0.1-SNAPSHOT/updateCompanyById.action");var i="",o="",n={};"去认证"==t.btnText?(i="".concat(s.default,"/post_horse-0.0.1-SNAPSHOT/insertCompany.action"),o="POST",n={userId:t.userInfo.id,companyName:t.companyName,companyAddress:t.companyAddress,serviceArea:t.serviceArea,serviceIfo:t.serviceIfo,companyQualifications:t.companyQualifications,contactsPeopleName:t.contactsPeopleName}):(i="".concat(s.default,"/post_horse-0.0.1-SNAPSHOT/updateCompanyById.action"),o="PUT",n={id:t.companyId,userId:t.userInfo.id,companyName:t.companyName,companyAddress:t.companyAddress,serviceArea:t.serviceArea,serviceIfo:t.serviceIfo,companyQualifications:t.companyQualifications,contactsPeopleName:t.contactsPeopleName}),e.request({url:i,method:o,data:n,success:function(e){console.log(e),t.getData(t.userInfo.id),t.pageState=1},fail:function(){},complete:function(){}})}else e.showToast({title:"服务详情不能为空",icon:"none"});else e.showToast({title:"服务区域不能为空",icon:"none"});else e.showToast({title:"联系人姓名不能为空",icon:"none"});else e.showToast({title:"公司地址不能为空",icon:"none"});else e.showToast({title:"公司名称不能为空",icon:"none"})},getData:function(t){var a=this;e.request({url:"".concat(s.default,"/post_horse-0.0.1-SNAPSHOT/findCompanyByCompanyUserId.action"),method:"GET",data:{userId:t},success:function(e){console.log(JSON.stringify(e)),0==e.data.data.length?a.btnText="去认证":(a.companyInfoText=e.data.data[0],a.companyName=e.data.data[0].companyName,a.companyAddress=e.data.data[0].companyAddress,a.serviceArea=e.data.data[0].serviceArea,a.serviceIfo=e.data.data[0].serviceIfo,a.companyQualifications=e.data.data[0].companyQualifications,a.companyQualifications=e.data.data[0].companyQualifications,a.contactsPeopleName=e.data.data[0].contactsPeopleName,a.companyId=e.data.data[0].id)},fail:function(){},complete:function(){}})},chooseImage:function(){var t=this,a=this;e.chooseImage({count:1,sizeType:["compressed"],sourceType:["album"],success:function(s){console.log("chooseImage success, temp path is",s.tempFilePaths[0]);var i=s.tempFilePaths[0];e.uploadFile({url:"http://129.28.84.183/sringmvcphoto-1.0-SNAPSHOT/updateitem.action",filePath:i,fileType:"image",name:"myPhoto",success:function(s){console.log("uploadImage success, res is:",s);var o=JSON.parse(s.data).url;e.showToast({title:"上传成功",icon:"success",duration:1e3}),a.companyQualifications=o,t.imageSrc=i},fail:function(t){console.log("uploadImage fail",t),e.showModal({content:t.errMsg,showCancel:!1})}})},fail:function(e){console.log("chooseImage fail",e)}})},againAuth:function(){this.pageState=0}}};t.default=n}).call(this,a("6e42")["default"])}},[["b918","common/runtime","common/vendor"]]]);